{
  "id": "pmle-20260206-kubeflow-pipelines",
  "exam_code": "PMLE",
  "domain": "チーム内およびチーム間の連携によるデータとモデルの管理",
  "section": "ML テストのトラッキングと実行",
  "topic": "Kubeflow Pipelines での実験管理",
  "difficulty": "medium",
  "question": "Vertex AI Pipelines を使用して ML モデルの実験を管理しています。複数のパイプライン実行（Run）を選択して「実行の比較（Compare runs）」ビューを確認しましたが、モデルの精度（Accuracy）や損失（Loss）といったメトリクスが比較テーブルに表示されません。各コンポーネント内では、Python の `print()` 文を使用してメトリクスをログ出力しています。コンソール上でこれらのメトリクスを可視化・比較できるようにするためには、コンポーネントをどのように修正すべきですか？",
  "options": [
    "コンポーネントの定義に `Output[Metrics]` などのアーティファクト型を出力として追加し、コンポーネント内でメトリクスをこのアーティファクトに書き出すように修正する。",
    "Cloud Logging にメトリクスが送信されるよう、コンポーネント内で `google-cloud-logging` ライブラリを使用して構造化ログを出力する。",
    "パイプラインを実行するサービスアカウントに `Vertex AI SDK Admin` ロールを付与して、メトリクスの自動収集機能を有効にする。",
    "コンポーネントの `base_image` を Vertex AI の専用プリビルドコンテナイメージに変更し、環境変数 `ENABLE_METRICS_EXPORT` を true に設定する。"
  ],
  "correct": 0,
  "explanation": "Vertex AI Pipelines のコンソール、特に「実行の比較」ビューでメトリクスを表示・比較するためには、それらを ML Metadata のアーティファクトとして明示的に出力する必要があります。KFP SDK を使用してコンポーネントの引数に `Output[Metrics]`（スカラー値用）や `Output[ClassificationMetrics]`（混同行列や ROC 曲線用）を定義し、コンポーネント内で `metrics.log_metric()` 等のメソッドを使用して値を書き込むことで、UI 上で可視化されます。単に `print()` 文で標準出力にログを出力しただけでは、メタデータストアにメトリクスとして登録されないため、UI での比較はできません。他の選択肢（ログ出力、ロール付与、イメージ変更）では、メタデータアーティファクトとしての登録は行われません。"
}