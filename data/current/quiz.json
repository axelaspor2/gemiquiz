{
  "id": "pmle-20260221-vertex-ml-metadata",
  "exam_code": "PMLE",
  "domain": "ML パイプラインの自動化とオーケストレーション",
  "section": "メタデータのトラッキングと監査",
  "topic": "Vertex ML Metadata の活用",
  "difficulty": "hard",
  "question": "Vertex AI Pipelines を使用して BigQuery テーブルからデータを抽出・処理するパイプラインを運用しています。ガバナンス要件により、モデルからソースデータまでのリネージ（由来）を Vertex ML Metadata で完全に可視化する必要があります。現在のコンポーネントは `source_table_uri: str` として URI を受け取っていますが、これではリネージグラフの起点にテーブルが表示されません。エンジニアが引数の型を `Input[Dataset]` に変更して再コンパイルを試みたところ、パイプライン定義時に「`str` 型の入力を `Dataset` アーティファクト型に割り当てることはできない」という型不一致エラーが発生しました。この問題を解決し、リネージを正しく表示させるための最も適切な方法はどれですか？",
  "options": [
    "dsl.importer コンポーネントを使用して、URI 文字列を Dataset などのアーティファクト型に変換（インポート）し、その出力を後続のコンポーネントの Input に渡すようにパイプラインを構成する。",
    "コンポーネントの引数型を str のままにし、コンポーネントのコード内で aiplatform.Artifact.create を実行して手動でアーティファクトを登録し、そのメタデータに BigQuery の URI を記録する。",
    "パイプラインの定義ファイル（JSON/YAML）を直接編集し、入力パラメータの runtime_config セクションで該当する str 引数の型定義を Artifact に強制的に書き換える。",
    "Vertex AI の「管理データセット」として BigQuery テーブルをあらかじめ登録しておき、コンポーネントの引数には URI ではなくデータセットのリソース ID を str として渡す。"
  ],
  "correct": 0,
  "explanation": "Vertex AI Pipelines（および KFP v2）において、リネージグラフにノードとして表示されるのは「アーティファクト（Artifact）」のみです。`str` や `int` などの基本型は「パラメータ」として扱われ、実行（Execution）のプロパティには記録されますが、リネージの独立したノードとしては表示されません。外部のリソース（BigQuery テーブルや GCS 上のファイルなど）をリネージの起点として可視化するには、それをアーティファクトとしてパイプラインに認識させる必要があります。`dsl.importer` は、外部の URI を指定したアーティファクト型として「インポート」するための特殊なコンポーネントであり、これを使用することで型不一致エラーを回避しつつ、リネージの起点を正しく作成できます。選択肢Bの手動登録はパイプラインの自動追跡と整合性を取るのが難しく、選択肢Dは管理オーバーヘッドが大きく、リネージの自動接続も保証されません。"
}